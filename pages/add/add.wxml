ã€<view class="container">
  
  <view class="top-navbar">
    <view class="nav-item {{curTab==0 ? 'active' : ''}}" bindtap="switchTab" data-idx="0">
      <text class="nav-icon">ğŸ“‹</text> <text>èµ›ç¨‹ç®¡ç†</text>
    </view>
    <view class="nav-item {{curTab==1 ? 'active' : ''}}" bindtap="switchTab" data-idx="1">
      <text class="nav-icon">ğŸ†</text> <text>ç§¯åˆ†æ’å</text>
    </view>
  </view>
  <view class="nav-placeholder"></view>

  <!-- Tab 0: èµ›ç¨‹ç®¡ç† -->
  <view wx:if="{{curTab == 0}}" class="tab-content">
    <view class="filter-container">
      <view class="filter-capsule">
        <view class="filter-item {{matchStatus==0 ? 'filter-active' : ''}}" bindtap="switchStatus" data-status="0">â³ å¾…å½•å…¥</view>
        <view class="filter-item {{matchStatus==1 ? 'filter-active' : ''}}" bindtap="switchStatus" data-status="1">âœ… å·²å½•å…¥</view>
      </view>
    </view>
    <scroll-view scroll-y class="match-list">
      <block wx:for="{{matchList}}" wx:key="_id">
        <view class="match-card">
          <view class="card-header">
            <view class="tour-tag">{{item.tournament}}</view>
            <view class="round-tag">{{item.group || item.round}}</view>
          </view>
          <view class="vs-row">
            <view class="player p1 {{item.winner==item.player1?'is-winner':''}}">
              <text class="p-name">{{item.player1_name}}</text>
              <text wx:if="{{item.winner==item.player1}}" class="win-mark">ğŸ‘‘</text>
            </view>
            <view class="vs-center">VS</view>
            <view class="player p2 {{item.winner==item.player2?'is-winner':''}}">
              <text class="p-name">{{item.player2_name}}</text>
              <text wx:if="{{item.winner==item.player2}}" class="win-mark">ğŸ‘‘</text>
            </view>
          </view>
          <view class="action-row">
            <button wx:if="{{matchStatus == 0}}" class="btn-action btn-green" bindtap="handleMatchClick" data-idx="{{index}}">âœï¸ å½•å…¥ç»“æœ</button>
            <button wx:if="{{matchStatus == 1}}" class="btn-action btn-red" bindtap="handleMatchClick" data-idx="{{index}}">â†©ï¸ æ’¤é”€é‡ç½®</button>
          </view>
        </view>
      </block>
      <view wx:if="{{matchList.length === 0}}" class="empty-state">
        <text class="empty-text">{{matchStatus==0 ? 'æ²¡æœ‰å¾…å½•å…¥çš„æ¯”èµ›' : 'æ²¡æœ‰å·²å®Œèµ›è®°å½•'}}</text>
      </view>
    </scroll-view>
  </view>

  <!-- Tab 1: ç§¯åˆ†æ’å -->
  <view wx:if="{{curTab == 1}}" class="tab-content">
    
    <view class="search-box">
      <!-- 1. èµ›äº‹é€‰æ‹© -->
      <view class="picker-row">
        <view class="picker-label">èµ›äº‹</view>
        <picker range="{{tourNames}}" bindchange="bindTourPickerChange">
          <view class="picker-display {{tourIndex===null?'placeholder':''}}">
            <text>{{tourIndex !== null ? tourNames[tourIndex] : 'ç‚¹å‡»é€‰æ‹©èµ›äº‹'}}</text>
            <text class="arrow-icon">â–¼</text>
          </view>
        </picker>
      </view>

      <!-- 2. åˆ†ç»„é€‰æ‹© (æ–°å¢) -->
      <view class="picker-row">
        <view class="picker-label">åˆ†ç»„</view>
        <picker range="{{groupList}}" bindchange="bindGroupPickerChange" disabled="{{tourIndex === null}}">
          <view class="picker-display {{tourIndex===null?'disabled':''}}">
            <text>{{groupList[groupIndex]}}</text>
            <text class="arrow-icon">â–¼</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- æ’ååˆ—è¡¨ -->
    <view class="rank-header" wx:if="{{rankList.length > 0}}">
      <text class="th rk">æ’å</text>
      <text class="th nm">é€‰æ‰‹</text>
      <text class="th pt">ç§¯åˆ†</text>
      <text class="th wl">èƒœ/è´Ÿ</text>
    </view>

    <view class="rank-list">
      <block wx:for="{{rankList}}" wx:key="name">
        <view class="rank-item {{index<3 ? 'top3' : ''}}">
          <view class="td rk">
            <text class="rank-badge rank-{{index+1}}">{{index+1}}</text>
          </view>
          <text class="td nm">{{item.name}}</text>
          <text class="td pt">{{item.points}}</text>
          <text class="td wl">{{item.win}}/{{item.lose}}</text>
        </view>
      </block>
    </view>
    
    <view wx:if="{{rankList.length === 0}}" class="empty-state">
      <text class="empty-text">ğŸ‘† è¯·é€‰æ‹©èµ›äº‹å’Œåˆ†ç»„</text>
    </view>
  </view>

</view>