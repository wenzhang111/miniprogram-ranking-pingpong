<view class="container">
  <!-- é¡¶éƒ¨åˆ‡æ¢æ  -->
  <view class="tab-header">
    <view class="tab-item {{curTab==0 ? 'active' : ''}}" bindtap="switchTab" data-idx="0">ğŸ‘¤ æˆ‘çš„è®°å½•</view>
    <!-- åªæœ‰ç®¡ç†å‘˜å¯è§ -->
    <view wx:if="{{isAdmin}}" class="tab-item {{curTab==1 ? 'active' : ''}}" bindtap="switchTab" data-idx="1">ğŸŒ å…¨éƒ¨è®°å½•</view>
  </view>

  <scroll-view scroll-y class="history-list">
    <block wx:for="{{matchList}}" wx:key="_id">
      <view class="match-card">
        <view class="match-header">
          <text class="date">{{item.formatDate}}</text>
          <text class="tag">{{item.tournament}} {{item.group||item.round}}</text>
        </view>
        
        <view class="match-body">
          <!-- é€‰æ‰‹1 -->
          <view class="player-row {{item.winner==item.player1 ? 'win' : 'lose'}}">
            <text class="p-name">{{item.player1_name}}</text>
            <text class="p-delta">{{item.delta1 > 0 ? '+' + item.delta1 : item.delta1}}</text>
          </view>
          
          <view class="vs">VS</view>

          <!-- é€‰æ‰‹2 -->
          <view class="player-row {{item.winner==item.player2 ? 'win' : 'lose'}}">
            <text class="p-name">{{item.player2_name}}</text>
            <text class="p-delta">{{item.delta2 > 0 ? '+' + item.delta2 : item.delta2}}</text>
          </view>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€æç¤º -->
    <view wx:if="{{matchList.length === 0}}" class="empty">
      <text wx:if="{{curTab==0}}">ä½ è¿˜æ²¡æœ‰å‚åŠ è¿‡ä»»ä½•å·²å®Œèµ›çš„æ¯”èµ›</text>
      <text wx:else>æš‚æ— ä»»ä½•å†å²è®°å½•</text>
    </view>
  </scroll-view>
</view>