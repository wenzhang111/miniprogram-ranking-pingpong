<view class="container">
  <view class="header">
    <view class="title">ğŸ‘®â€â™‚ï¸ èµ›ç¨‹æ€»æ§å°</view>
    <view class="desc">ç®¡ç†å‘˜å¯åœ¨æ­¤ä»£å½•æˆ–æ’¤é”€æ¯”èµ›ç»“æœ</view>
  </view>

  <!-- === æ–°å¢ï¼šçŠ¶æ€åˆ‡æ¢ Tab === -->
  <view class="tabs">
    <view class="tab-item {{currentStatus===0 ? 'active' : ''}}" bindtap="switchTab" data-status="{{0}}">
      â³ å¾…å½•å…¥
    </view>
    <view class="tab-item {{currentStatus===1 ? 'active' : ''}}" bindtap="switchTab" data-status="{{1}}">
      âœ… å·²å½•å…¥ (å¯æ’¤é”€)
    </view>
  </view>
  <!-- ======================== -->

  <scroll-view scroll-y class="list">
    <block wx:for="{{matchList}}" wx:key="_id">
      <view class="match-card">
        <view class="card-top">
          <text class="tag">{{item.tournament}}</text>
          <text class="round">{{item.group || item.round}}</text>
        </view>
        
        <view class="vs-box">
          <!-- é€‰æ‰‹1 (å¦‚æœèµ¢äº†åŠ ä¸ªç»¿è‰²æ ·å¼) -->
          <view class="player {{item.winner==item.player1 ? 'winner-text' : ''}}">
            <text class="name">{{item.player1_name}}</text>
            <text wx:if="{{item.winner==item.player1}}">ğŸ‘‘</text>
          </view>
          
          <view class="vs-text">VS</view>
          
          <!-- é€‰æ‰‹2 -->
          <view class="player {{item.winner==item.player2 ? 'winner-text' : ''}}">
            <text class="name">{{item.player2_name}}</text>
            <text wx:if="{{item.winner==item.player2}}">ğŸ‘‘</text>
          </view>
        </view>
        
        <!-- === æŒ‰é’®é€»è¾‘ï¼šæ ¹æ®å½“å‰ Tab æ˜¾ç¤ºä¸åŒæŒ‰é’® === -->
        
        <!-- æƒ…å†µ1ï¼šå¾…å½•å…¥ -> æ˜¾ç¤ºå½•å…¥æŒ‰é’® -->
        <button wx:if="{{currentStatus === 0}}" class="btn-record" bindtap="openResultModal" data-idx="{{index}}">
          ğŸ‘‰ å½•å…¥ç»“æœ
        </button>

        <!-- æƒ…å†µ2ï¼šå·²å½•å…¥ -> æ˜¾ç¤ºæ’¤é”€æŒ‰é’® (çº¢è‰²) -->
        <button wx:if="{{currentStatus === 1}}" class="btn-record btn-revoke" bindtap="revokeMatch" data-idx="{{index}}">
          â†©ï¸ æ’¤é”€é‡ç½®
        </button>
        <!-- ======================================== -->
        
      </view>
    </block>

    <view wx:if="{{matchList.length === 0}}" class="empty">
      {{currentStatus===0 ? 'å½“å‰æ²¡æœ‰å¾…åŠæ¯”èµ›' : 'è¿‘æœŸæ²¡æœ‰å®Œèµ›è®°å½•'}}
    </view>
  </scroll-view>

  <!-- è¡¥å½•æŒ‰é’®åªåœ¨å¾…å½•å…¥æ˜¾ç¤º -->
  <view class="footer" wx:if="{{currentStatus===0}}">
    <picker mode="selector" range="{{allNames}}" bindchange="adminAddPlayer">
      <button class="btn-add">â• ç®¡ç†å‘˜æ‰‹åŠ¨è¡¥å½•</button>
    </picker>
  </view>
</view>